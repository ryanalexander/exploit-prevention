import {MessageEmbed} from "discord.js";

const config = require("../../config.json");

export var lang = require("../../lang.json");

export function getMessage(message: Language.Message, replacements: Language.StringReplacement[]):  MessageEmbed {
    switch (message.type) {
        case Language.MessageType.EMBED:
            let embed = new MessageEmbed();
            embed.setTitle(message.title);
            embed.setDescription(Language.replaceArgs(message.body, replacements))
            embed.setColor(config.colours[`${message.color}`])
            return embed;
        case Language.MessageType.MESSAGE:
            return new MessageEmbed().setDescription("test");
    }
}

export namespace Language {
    export enum MessageType {
        EMBED = "EMBED",
        MESSAGE = "MESSAGE"
    }
    export interface StringReplacement {
        type: String,
        value: String
    }
    export interface Message {
        type: MessageType,
        title: String,
        body: String,
        color: String
    }

    export function replaceArgs(message: String, args: StringReplacement[]) {
        let target = message.toString();
        args.forEach(rp =>
            target=target.replace(`({${rp.type}})`, `${rp.value}`)
        );
        return target;
    }
}