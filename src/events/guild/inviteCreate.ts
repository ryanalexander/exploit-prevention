import { Event, Managers } from "../../lib/libaries";
import { Invite } from "discord.js";

module.exports = class extends Event {
  constructor() {
    super({
      event: "inviteCreate",
    });
    this._execute = this.execute;
  }

  execute(invite: Invite) {
    let guild = invite.guild;
    if (!guild) return;

    Managers.GuildManager.getGuildModules(guild).then((modules: any) => {
      if (
        modules.find((module: any) => module.module_name === "invitetrack")
          .enabled
      )
        Managers.GuildManager.syncInvites(guild);
    });
  }
};
