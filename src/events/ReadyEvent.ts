import {Event, Managers} from '../lib/libaries';
import {Guild} from "discord.js";

module.exports = class extends Event {
    constructor() {
        super({
            event: "ready",
        });
        this._execute = this.execute;
    }

    execute() {
        [
            `\u001b[38;5;10mSuccessfully started ${Managers.DiscordClient.user.tag} \u001b[0m`
        ].forEach(line => {
            console.log(line);
        });

        Managers.DiscordClient.guilds.cache.forEach((guild:Guild) => {
            Managers.GuildManager.getGuildModules(guild).then(((modules:any) => {
                if(modules.find((module:any) => module.module_name === "invitetrack").enabled)
                    Managers.GuildManager.syncInvites(guild);
            }));
        })
    }

}