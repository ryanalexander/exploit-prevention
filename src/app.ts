import Discord from "discord.js";
import { Managers } from "./lib/libaries";
import {
  CommandManager,
  EventManager,
  GuildManager,
  ScheduleManager,
} from "./managers/Managers";
import SQL from "./lib/SQL";

const config = require("../config.json");

const client = new Discord.Client({
  shards: "auto",
  intents: [
    "GUILDS",
    "GUILD_MEMBERS",
    "GUILD_BANS",
    "GUILD_INVITES",
    "GUILD_MESSAGES",
    "GUILD_MESSAGE_REACTIONS",
    "GUILD_MESSAGE_TYPING",
  ],
});

// Global Managers
Managers.DiscordClient = client;
Managers.Config = config;

// Event Manager
Managers.EventManager = new EventManager("./events");

// Command Manager
Managers.CommandManager = new CommandManager("./commands");

// Guild Manager
Managers.GuildManager = new GuildManager(client);

// Schedule Manager idk
Managers.ScheduleManager = new ScheduleManager();

// SQL Manager
Managers.SQL = new SQL();

client.login(config.isDev ? config.tokens.dev : config.tokens.production);
