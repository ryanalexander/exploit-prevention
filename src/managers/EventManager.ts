import {Managers, Utils} from '../lib/libaries';

module.exports =class {
    private _eventDir: string;
    private _events: any[] = [];

    constructor(eventDir: string) {
        this._eventDir = eventDir;
        this._events = [];

        Utils.files.getFiles(this._eventDir).forEach((file:any) => {
            if(file.path.endsWith(".map"))return;
            this.loadEvent(file.path);
        })
    }

    private loadEvent(event: string):void {
        let e = new (require("../"+event));
        e.init(Managers.DiscordClient)
        this._events.push(e);
        console.log(`Command> Loaded event ${e._event}`);
    }

    get eventDir(): string {
        return this._eventDir;
    }
}